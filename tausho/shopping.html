<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>WEBお買い物計算メモ</title>
    <link rel="stylesheet" href="stylesheet.css">
</head>

<body>

    <header>
        WEBお買い物計算メモ
    </header>

    <div id="app">
        <table>
            <tr>
                <th></th>
                <th>商品名</th>
                <th>税抜価格</th>
                <th>税率</th>
                <th>個数</th>
            </tr>
            <tr v-for="(item, index) in items">
                <td><button v-on:click="deleteForm(index)">×</button></td>
                <td><input type="text" v-model="item.name"></td>
                <td><input type="number" v-model="item.price"></td>
                <td>
                    <ul>
                        <li>
                            <input type="radio" value="1.08" v-bind:name="'tax' + index" v-model="item.radio">8%
                        </li>
                            
                        <li>
                            <input type="radio" value="1.1" v-bind:name="'tax' + index" v-model="item.radio">10%
                        </li>
                    </ul>
                </td>
                <td>
                    <input type="number" v-model="item.quantity">
                </td>
            </tr>
        </table>
        <button v-on:click="addForm()">フォーム追加</button>

        <p>合計金額(税抜) : {{calcurateSumNotIncludingTax}}円</p>
        <p>合計金額(税込) : {{calcurateSumIncludingTax}}円</p>

        items : {{items}}

    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>

    <script>
        new Vue({
            el: "#app",
            data(){
                return{
                    items:[{
                        name:"",
                        price:"",
                        radio:"1.08",
                        quantity:""
                    }]
                };
            },
            methods: {
                addForm() {
                    this.items.push({
                        name:"",
                        price:"",
                        radio:"1.08",
                        quantity:""
                    });
                },
                deleteForm(index) {
                    this.items.splice(index,1);
                }
            },
            computed:{
                calcurateSumNotIncludingTax:function(){
                    let sum = 0;
                    this.items.forEach(item=>{sum+=parseInt(item.price*item.quantity)});
                    return sum;
                },
                calcurateSumIncludingTax:function(){
                    let sum = 0;
                    this.items.forEach(item=>{sum+=parseInt(item.price*item.quantity*item.radio)});
                    return parseInt(sum);
                }
            }
        });
    </script>
</body>

</html>